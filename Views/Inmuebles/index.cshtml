@model IEnumerable<Proyecto_Inmobiliaria.Models.Inmueble>

@{
	ViewData["Title"] = "Index";
	var rnd = new Random();
	var Pagina = ViewBag.Pagina ?? 1;
    var TotalPaginas = ViewBag.TotalPaginas ?? 1;
}

<h1>Listado de Inmuebles</h1>

<div class="btn-group pull-left">
	<a class="btn btn-primary"  asp-action="Create" title="Crear">Crear Nuevo</a>
</div>
<table class="table">
	<thead>
		<tr>
			<th>
				@Html.DisplayNameFor(model => model.Id)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Direccion)
			</th>
            <th>
                @Html.DisplayNameFor(model => model.Uso)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Tipo)
            </th>
            <th>
				@Html.DisplayNameFor(model => model.Ambientes)
			</th>			
			<th>
				@Html.DisplayNameFor(model => model.Superficie)
			</th>
            <th>
                @Html.DisplayNameFor(model => model.Estado)
            </th>
			<th>
                @Html.DisplayNameFor(model => model.Precio)
            </th>
			<th>
				@Html.DisplayNameFor(model => model.IdPropietario)
			</th>			
			<th>Acciones</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var item in Model)
		{
			<tr>
				<td>
					@Html.DisplayFor(modelItem => item.Id)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Direccion)
				</td>
                <td>
                    @Html.DisplayFor(modelItem => item.Uso)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Tipo)                
                </td>                
				<td>
					@Html.DisplayFor(modelItem => item.Ambientes)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Superficie) m²
				</td>
                <td>
                    @Html.DisplayFor(modelItem => item.Estado)
                </td>
				<td>
                    $ @Html.DisplayFor(modelItem => item.Precio)
                </td>
				<td>
					@("ID: " + item.Propietario.Id + " / "  + item.Propietario.Nombre + " " + item.Propietario.Apellido + " / " + item.Propietario.Dni)
					
				</td>				
				<td>
					<div class="btn-group" role="group">
						<a class="btn btn-primary" asp-action="Edit" asp-route-id="@item.Id" title="Editar">
							<i class="fa-solid fa-pen">Editar</i>
						</a>
						<a class="btn btn-danger" asp-action="Eliminar" asp-route-id="@item.Id" title="Eliminar">
							<i class="fa-solid fa-trash-can">Eliminar</i>
						</a>
						<a class="btn btn-secondary" asp-action="Imagenes" asp-route-id="@item.Id" title="Ver imágenes">
							<i class="fa-solid fa-images">Imagenes</i>
						</a>						
					</div>
				</td>
			</tr>
		}
	</tbody>
</table>

<nav aria-label="Page navigation">
	<ul class="pagination">
		<!-- Botón "Anterior" -->
		@if (Pagina > 1)
		{
			<li class="page-item">
				<a class="page-link" asp-action="Index" asp-controller="Inmuebles" asp-route-pagina="@(Pagina - 1)">
    				<i class="fa-solid fa-angles-left"></i>
				</a>
			</li>
		}
		else
		{
			<li class="page-item disabled">
				<span class="page-link"><i class="fa-solid fa-angles-left"></i></span>
			</li>
		}

		<!-- Números de página -->
		@for (int i = 1; i <= TotalPaginas; i++)
		{
			<li class="page-item @(i == Pagina ? "active" : "")">
				<a class="page-link" asp-action="Index" asp-controller="Inmuebles" asp-route-pagina="@i">@i</a>
			</li>
		}
		<!-- Botón "Siguiente" -->
		@if (Pagina < TotalPaginas)
		{
			<li class="page-item">
				<a class="page-link" asp-action="Index" asp-controller="Inmuebles" asp-route-pagina="@(Pagina + 1)" aria-label="Siguiente">
					<i class="fa-solid fa-angles-right"></i>
				</a>
			</li>
		}
		else
		{
			<li class="page-item disabled">
				<span class="page-link"><i class="fa-solid fa-angles-right"></i></span>
			</li>
		}		
	</ul>
</nav>
